<!doctype html>
<html>
<head>
    <title>Checkout</title>
</head>
<body>
    <h1>Checkout</h1>
    <ul>
        {% for item in cart %}
            <li>{{ item.description }} - ${{ item.price }} x {{ item.quantity }} = ${{ item.subtotal }}</li>
        {% endfor %}
    </ul>
    <h2>Total: ${{ total }}</h2>

    <form method="POST" action="{{ url_for('authorize_payment') }}">
        <!-- Customer Information Section -->
        <h3>Customer Information</h3>
        {% if not session.get('customer_id') %}
            <label for="name">Full Name:</label>
            <input type="text" id="name" name="name" required><br><br>

            <label for="email">Email Address:</label>
            <input type="email" id="email" name="email" required><br><br>

            <label for="address">Address:</label>
            <input type="text" id="address" name="address"><br><br>
        {% else %}
            <p>Logged in as {{ session.get('user_name') }}</p>
        {% endif %}

        <!-- Credit Card Details Section -->
        <h3>Credit Card Details</h3>
        <label for="card_number">Credit Card Number:</label>
        <input type="text" id="card_number" name="card_number" required><br><br>
        
        <label for="card_name">Name on Card:</label>
        <input type="text" id="card_name" name="card_name" required><br><br>

        <label for="card_exp">Expiration Date (MM/YYYY):</label>
        <input type="text" id="card_exp" name="card_exp" required><br><br>

        <input type="hidden" name="total_price" value="{{ total }}">
        
        <button type="submit">Authorize Payment</button>
    </form>
</body>
</html>
